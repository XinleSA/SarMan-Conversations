# =============================================================================
# kubeadm Configuration File
# =============================================================================
# This file configures the kubeadm init process for the control plane.
# It enables the NodeSwap feature gate and sets the pod network CIDR.
#
# Usage: sudo kubeadm init --config kubeadm-config.yaml --upload-certs
# =============================================================================
apiVersion: kubeadm.k8s.io/v1beta3
kind: ClusterConfiguration
kubernetesVersion: "v1.30.0"
# Replace with your load-balanced endpoint or the control plane IP:
controlPlaneEndpoint: "192.168.1.10:6443"
networking:
  podSubnet: "10.244.0.0/16"
  serviceSubnet: "10.96.0.0/12"
---
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
# Allow swap to be used on nodes (Kubernetes 1.28+ feature)
failSwapOn: false
featureGates:
  NodeSwap: true
memorySwap:
  swapBehavior: LimitedSwap
